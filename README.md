# C++ & Win32 API 기반 RAW 디지털 영상처리 시스템

## 📌 프로젝트 개요
본 프로젝트는 외부 라이브러리(OpenCV 등)를 사용하지 않고, 순수 **C++**와 **Win32 API (GDI)**만을 사용하여 구현한 **고성능 디지털 영상처리 프로그램**입니다.
헤더 정보가 없는 RAW 포맷의 영상 데이터를 직접 메모리에 로드하고, 픽셀 단위의 조작을 통해 다양한 영상처리 알고리즘을 구현함으로써 영상처리의 핵심 원리를 깊이 있게 탐구하였습니다.

## 🏗️ 시스템 아키텍처 (System Architecture)

### 1. 콘솔-GUI 하이브리드 인터페이스
- **Console Interface**: 사용자 입력(메뉴 선택, 파라미터 값 설정)을 처리하며 직관적인 제어 환경을 제공합니다.
- **GUI Window**: 처리된 영상 결과를 실시간으로 렌더링하기 위한 전용 윈도우입니다.
- **비동기 메시지 루프**: 콘솔의 입력 대기 상태(`while` 루프) 내에 `PeekMessage`를 통합하여, GUI 윈도우가 응답 없음 상태에 빠지지 않도록 설계되었습니다.

### 2. 메모리 관리 (Memory Management)
- **동적 할당**: 영상의 크기가 가변적임을 고려하여 `unsigned char**` (이중 포인터)를 사용한 2차원 배열 동적 할당을 수행합니다.
- **RAW 데이터 처리**: 파일 헤더 파싱 없이 바이너리 데이터를 직접 읽어오며(`fread`), 파일 크기의 제곱근을 통해 해상도를 역추산합니다.

### 3. 렌더링 파이프라인
- **GDI 활용**: `StretchDIBits` API를 사용하여 메모리 버퍼의 픽셀 데이터를 고속으로 윈도우 DC에 전송합니다.
- **더블 버퍼링 (Double Buffering)**: (심화 버전) 메모리 DC를 활용하여 화면 깜빡임(Flickering)을 근본적으로 제거하였습니다.

---

## 🧩 주요 알고리즘 및 구현 원리

### 1. 화소 점 처리 (Point Processing)
각 픽셀의 값을 독립적으로 변환하는 기법입니다.

| 기능 | 설명 | 수식 / 로직 |
| :--- | :--- | :--- |
| **밝기 조절** | 영상의 전체적인 명도를 조절합니다. | $g(x,y) = f(x,y) + \alpha$ (Clamping 적용) |
| **명암비 조절** | 영상의 대비(Contrast)를 조절합니다. | $g(x,y) = f(x,y) \times \beta$ |
| **이진화** | 임계값(128)을 기준으로 흑/백으로 분류합니다. | $g(x,y) = \begin{cases} 255 & \text{if } f(x,y) \ge T \\ 0 & \text{otherwise} \end{cases}$ |
| **감마 보정** | 비선형 변환을 통해 밝기를 보정합니다. | $g(x,y) = 255 \times (f(x,y)/255)^{1/\gamma}$ |

### 2. 기하학적 변환 (Geometric Transformation)
픽셀의 좌표 위치를 재배치하는 기법입니다.

- **확대/축소 (Scaling)**:
  - 기본: **최근접 이웃 보간법 (Nearest Neighbor Interpolation)**
  - 심화: **양선형 보간법 (Bilinear Interpolation)**을 적용하여 계단 현상(Aliasing) 최소화.
- **회전 (Rotation)**:
  - 삼각함수 회전 변환 행렬 적용.
  - **역방향 사상 (Backward Mapping)**을 통해 빈 공간(Hole) 발생 방지.
  - 중심점 기준 회전 및 화면 좌표계(Y축 반전) 보정 적용.

### 3. 화소 영역 처리 (Spatial Filtering)
$3 \times 3$ 마스크(커널)를 이용한 회선(Convolution) 연산입니다.

- **엠보싱 (Embossing)**: 미분 마스크를 적용하여 음각/양각 효과 생성.
- **블러링 (Blurring)**: 주변 픽셀의 평균값을 적용하여 노이즈 제거.
- **샤프닝 (Sharpening)**: 라플라시안(Laplacian) 필터의 변형을 사용하여 에지 강조.
  - 마스크 예시: `[[0, -1, 0], [-1, 5, -1], [0, -1, 0]]`

### 4. 심화/응용 기능
- **히스토그램 스트레칭**: 명암 분포를 0~255 전 구간으로 확장하여 선명도 개선.
- **유화 효과 (Oil Painting)**: 국소 영역 내 최빈값(Mode)을 사용하여 회화적 질감 표현.
- **물결 효과 (Ripple)**: 사인파(Sine Wave) 함수를 좌표에 적용하여 왜곡 효과 생성.

---

## 📂 코드 구조 (Code Structure)

### 핵심 구성 요소
- `main()`: 프로그램 진입점, GUI 윈도우 생성 및 메인 이벤트 루프 실행.
- `WndProc()`: 윈도우 메시지 처리기 (`WM_PAINT`, `WM_COMMAND` 등).
- `DrawImageToHDC()`: 픽셀 버퍼를 화면에 그리는 렌더링 함수.

### 데이터 구조
```cpp
int inH, inW;            // 입력 영상의 높이, 너비
unsigned char** inImage;  // 입력 영상 버퍼 (2D 배열)
unsigned char** outImage; // 출력 영상 버퍼 (2D 배열)
```

---

## 🚀 빌드 및 실행 방법

### 요구 사항
- **Compiler**: Visual Studio (MSVC)
- **SDK**: Windows SDK (기본 포함)

### 실행 순서
1. `C:/images/user/` 경로에 `.raw` 포맷의 이미지 파일을 위치시킵니다. (또는 소스 코드 내 경로 수정)
2. Visual Studio에서 솔루션을 빌드(`Ctrl + Shift + B`)합니다.
3. 생성된 `.exe` 파일을 실행합니다.
4. 콘솔 메뉴의 안내에 따라 기능을 선택하고 파라미터를 입력합니다.

---

## ⚠️ 기술적 제약 사항
- **입력 포맷**: 헤더가 없는 RAW Grayscale(8-bit) 이미지만 지원합니다.
- **해상도 제한**: 파일 크기로 해상도를 추정하므로, **정사각형(Square) 이미지** 사용을 권장합니다.

---

## 📜 라이선스 및 작성자
본 프로젝트는 디지털 영상처리 학습을 위해 제작되었습니다.
작성자: [작성자 이름]
